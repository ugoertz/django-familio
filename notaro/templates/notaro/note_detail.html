{% extends "_layouts/base.html" %}
{% load static %}
{% load partialdate_tags %}
{% load markup_tags %}
{% load typogrify_tags %}
{% load fb_versions %}


{% block css %}
{{block.super}}

<style>
ul.simple {
    list-style: none;
    padding-left: 1em;
}

ul.simple li {
    padding-left: 3em;
    font-size: 110%;
}
</style>
{% endblock css %}

{% block js %}
{{ block.super  }}
{% if request.user.is_authenticated and request.user.is_staff %}
<script type="text/javascript" src="{% static 'js/rsterrors.js' %}"></script>
{% endif %}
{% endblock js %}


{% block content %}
<div class="container">
    <h1>{{ object.title }}</h1>

    <div class="row">
        <div class="col-md-8">
            {{ object.text|apply_markup:"genrestructuredtext"|typogrify }}
            <hr>
            <p style="margin-top:30px;">Autor{% if object.authors.count > 1 %}en{% endif %}: {% for u in object.authors.all %}{{ u.get_full_name }}{% if forloop.last %}.{% else %}, {% endif %}{% endfor %}
        </div>
        {% if user.is_authenticated and user.is_staff %}
        <div class="col-md-3 col-md-offset-1">
            <div style="padding-left: 10px; padding-top: 10px; padding-bottom: 10px; padding-right: 30px; border: 1px solid lightgray;">
            <p style="margin-bottom: 30px;">
            {% if object.published %}<span class="cabin">Veröffentlicht</span>{% else %}<span class="cabin" style="background-color: orange; padding:5px;">Unveröffentlicht</span>{% endif %}
            </p>
            {% include "notaro/admin_links.html" with admin_edit_link="notaro/note" %}
            </div>
        </div>
        {% endif %}
    </div>
    <div class="row" style="margin-top: 100px;">
        {% for pic in object.pictures.all %}
        <div>
            <a href="{{ pic.image.url }}"><img src="{% version pic.image 'medium' %}" /></a><br>
            <p style="margin-top: 20px;">{{ pic.caption }}</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}


