{% extends "_layouts/base.html" %}
{% load static %}
{% load markup_tags %}
{% load typogrify_tags %}
{% load fb_versions %}

{% block css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/selectize.bootstrap3.css' %}">

<style>
button, .selectize-input {
    font-family: Cabin, helvetica, sans;
}
</style>
{% endblock css %}

{% block js %}
{{ block.super  }}
{% if user_is_admin %}
<script type="text/javascript" src="{% static 'js/rsterrors.js' %}"></script>
<script type="text/javascript" src="{% static 'js/selectize.min.js' %}"></script>
<script>
$(document).ready(function() {
    {% include "tags/selectize_tags.js" %}
});
</script>
{% endif %}
{% endblock js %}

{% block content %}
<div class="container">

    <div class="row" style="margin-top: 50px;">
        <div class="col-md-8">
            {% if user_is_admin %}
                {% url "save-tags" "notaro" "picture" object.pk as action %}
                {% include "tags/tags_form.html" %}
            {% endif %}
        </div>
    </div>
    <div class="row">
        <div class="col-md-8">
            <a href="{{ object.image.url  }}">
                <img src="{% version object.image  'large' %}" style="margin-top: 50px; margin-bottom: 20px;">
            </a>

            {{ object.get_caption|apply_markup:"genrestructuredtext"|typogrify }}

            {% if object.date %}<p>{{ object.date }}</p>{% endif %}


            {% filter apply_markup:"genrestructuredtext" %}
            {% include "notaro/sources.rst" with all_sources=object.picturesource_set.all %}
            {% endfilter %}
        </div>
        <div class="col-md-3 col-md-offset-1">
            {% for tag in object.tags.all %}{{ tag.as_span|safe }}{% endfor %}
            {% if user_is_admin %}
                <div class="cabin adminbox">
                    {% include "notaro/admin_links.html" with admin_edit_link="notaro/picture" doc_link="bilder.html" %}
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

